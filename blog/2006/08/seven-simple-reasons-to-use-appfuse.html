<!DOCTYPE html>
<html data-code-prettify data-clipboard-buttons data-goto-top data-nav-menu data-switch-sidebar data-mobile-support>

  <head>
  <meta charset="utf-8"/>
  <title>使用 AppFuse 的七个理由 - Spring技术社区</title>
  <meta id="Viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <meta name="description" content="Spring Dev Site"/>
  <meta name="author" content="rainboyan.com"/>
  <meta name="keywords" content="Spring,Spring Boot,Spring Security,Spring Dev"/>
  <meta property="og:title" content="使用 AppFuse 的七个理由" /><meta property="og:image" content="/img/springdev-logo-large.png" /><meta property="og:type" content="article"><meta property="og:article:published_time" content='2006-08-08'><meta property="og:description" content="使用 AppFuse 的七个理由，学习 Java 开放源码工具 —— 并使用这些工具提高生产效率" />
  <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.png"/>
  <link href='https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="/css/main.css" />
  <link rel="stylesheet" type="text/css" href="/css/blog.css" />
  <link rel="stylesheet" type="text/css" href="/css/custom.css" />
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="/jspm_packages/system.js"></script>
  <script>
    System.config({baseURL: "/"});
  </script>
  <script src="/config.js"></script>
  <script>
      System.import('app/main.js')
  </script>
</head>
  <body>
  <div class="viewport">
    <header class="navbar header--navbar desktop-only">
      <div class="navbar-inner">
        <div class="container-fluid">
          <div class="spring-logo--container">
            <a class="spring-logo" href="/"><span></span></a>
          </div>
          <ul class="nav pull-right">
            <li class="navbar-link">
              <a href="/projects/" >项目</a>
            </li>
            <li class="navbar-link">
              <a href="/guides/" >指南</a>
            </li>
            <li class="navbar-link">
              <a href="/blog/" >博客</a>
            </li>
            <li class="navbar-link nav-search js-nav-search">
              <a>
                <i class="icon-search navbar-search--icon js-search-input-open"></i>
                <span class="search-input-close js-search-input-close">
                  <i class="icon-remove"></i>
                </span>
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div class="search-dropdown--container js-search-dropdown">
        <div class="container-fluid">
          <div class="search-form--container">
            <form class="form-inline form-search" action="../../../search" method="get">
              <input type="text" class="search-query search-form--form js-search-input" placeholder="Search for documentation, guides, and posts..." name="q" value="" />
              <button type="submit" class="search-form--submit"><i class="icon-search"></i></button>
            </form>
          </div>
        </div>
      </div>
    </header>
    <div>
    <div class="mobile-navigation--wrapper mobile-only">
      <div class="navigation-drawer--container">
        <div class="mobile-search--container">
          <form class="form-inline form-search" action="../../../search" method="get">
            <button type="submit" class="search-form--submit"><i class="icon-search"></i></button>
            <input type="text" class="search-query search-form--form js-search-input" placeholder="Search..." name="q" value="" />
          </form>
        </div>
        <div class="navigation-item-list">
          <div class="navbar-link">
            <a href="/">
              首页
              <i class="icon-chevron-right pull-right"></i>
            </a>
          </div>
          <div class="navbar-link">
            <a href="/projects/">
              项目
              <i class="icon-chevron-right pull-right"></i>
            </a>
          </div>
          <div class="navbar-link">
            <a href="/guides/">
              指南
              <i class="icon-chevron-right pull-right"></i>
            </a>
          </div>
          <div class="navbar-link">
            <a href="/blog/">
              博客
              <i class="icon-chevron-right pull-right"></i>
            </a>
          </div>
        </div>
      </div>
      <div class="mobile-nav">
        <div class="nav-icon js-open-nav-drawer">
          <i class="icon-reorder"></i>
        </div>
        <div class="header-center-icon">
          <a href="../../../">
            <div class="icon icon-spring-logo-mobile"></div>
          </a>
        </div>
      </div>
    </div>
  </div>

    <div class="container-fluid"></div>
    <div></div>
    <main class="body--container container-fluid">
      <div class="main-body--wrapper">
        <div class="desktop-only">
          <h1 class="blog-category active content--title">版本发布</h1>
          <div class="blog-category content--title">
            <div>Engineering</div>
          </div>
          <div class="blog-category content--title">
            <div>Releases</div>
          </div>
          <div class="blog-category content--title">
            <div>News and Events</div>
          </div>
          <div class="switch-sidebar pull-right"><input type="checkbox" class="js-switch"/></div>
        </div>
        <div class="row-fluid blog--wrapper">
          <article class="span8 mobile-left-pane" id="content">
            <div class="blog--container">
              <header>
                <h1 class="blog--title">使用 AppFuse 的七个理由</h1>
                <div class="meta-data--container">
                  <div class="meta-data--item desktop-only">
                    <div class="meta-data--icon icon blog-icon release"></div>
                    <span>
                      <a class="category" href="../../../blog/category/release.html">release</a>&nbsp;
                    </span>
                    </div>
                    <div class="meta-data--item">
                      <img class="meta-data--icon" src="/img/avatars/rain.png">
                      <a class="author" rel="author" href="http://rainboyan.com">rain</a>
                    </div>
                    <div class="meta-data--item">
                      <div class="meta-data--icon icon blog-icon calendar"></div>
                      <time class="date" pubdate="" datetime=''>2006-08-08</time>
                    </div>
                    <div class="meta-data--item">
                      <div class="meta-data--icon icon blog-icon comments"></div>
                      <a class="comments" href="../../../blog/2006/08/seven-simple-reasons-to-use-appfuse.html#gitalk-container">评论
                      </a>
                    </div>
                </div>
              </header>
              <div class="blog--post"><div id="toc" class="toc">
<div id="toctitle">目录</div>
<ul class="sectlevel1">
<li><a href="#理由_1测试">理由 1：测试</a></li>
<li><a href="#理由_2集成">理由 2：集成</a></li>
<li><a href="#理由_3自动化">理由 3：自动化</a></li>
<li><a href="#理由_4安全特性和可扩展性">理由 4：安全特性和可扩展性</a></li>
<li><a href="#理由_5使用_appgen_生成代码">理由 5：使用 AppGen 生成代码</a></li>
<li><a href="#理由_6文档">理由 6：文档</a></li>
<li><a href="#理由_7社区">理由 7：社区</a></li>
<li><a href="#结束语">结束语</a></li>
<li><a href="#相关主题">相关主题</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>AppFuse 是一个开放源码的项目和应用程序，它使用了在 Java 平台上构建的开放源码工具来帮助我们快速而高效地开发 Web 应用程序。我最初开发它是为了减少在为客户构建新 Web 应用程序时所花费的那些不必要的时间。从核心上来说，AppFuse 是一个项目骨架，类似于通过向导创建新 Web 项目时 IDE 所创建的东西。当我们使用 AppFuse 创建一个项目时，它会提示我们将使用开放源码框架，然后才创建项目。它使用 Ant 来驱动测试、代码生成、编译和部署。它提供了目录和包结构，以及开发基于 Java 语言的 Web 应用程序所需要的库。</p>
</div>
<div class="paragraph">
<p>与大部分 “new project” 向导不同，AppFuse 创建的项目从最开始就包含很多类和文件。这些文件用来实现特性，不过它们同时也会在您开发应用程序时被用作示例。通过使用 AppFuse 启动新项目，我们通常可以减少一到两周的开发时间。我们不用担心如何将开放源码框架配置在一起，因为这都已经完成了。我们的项目都已提前配置来与数据库进行交互，它会部署到应用服务器上，并对用户进行认证。我们不必实现安全特性，因为这都早已集成了。
当我最初开发 AppFuse 时，它只支持 Struts 和 Hibernate。经过几年的努力，我发现了比 Struts 更好的 Web 框架，因此我还添加了为这些 Web 框架使用的选项。现在，AppFuse 可以支持 Hibernate 或 iBATIS 作为持久性框架。对于 Web 框架来说，我们可以使用 JavaServer Faces（JSF）、Spring MVC、Struts、Tapestry 或 WebWork。</p>
</div>
<div class="paragraph">
<p>AppFuse 提供了很多应用程序需要的一些特性，包括：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>认证和授权</p>
</li>
<li>
<p>用户管理</p>
</li>
<li>
<p>Remember Me（这会保存您的登录信息，这样就不用每次都再进行登录了）</p>
</li>
<li>
<p>密码提醒</p>
</li>
<li>
<p>登记和注册</p>
</li>
<li>
<p>SSL 转换</p>
</li>
<li>
<p>E-mail</p>
</li>
<li>
<p>URL 重写</p>
</li>
<li>
<p>皮肤</p>
</li>
<li>
<p>页面修饰</p>
</li>
<li>
<p>模板化布局</p>
</li>
<li>
<p>文件上载</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>这种 “开箱即用” 的功能是 AppFuse 与其他 CRUD 代 框架的区别之一（CRUD 取自创建、检索、更新 和删除 几个操作的英文首字母），包括 Ruby on Rails、Trails 和 Grails。上面提到的这些框架，以及 AppFuse，都让我们可以从数据库表或现有的模型对象中生成主页/细节页。</p>
</div>
<div class="paragraph">
<p>图 1 阐述了一个典型 AppFuse 应用程序的概念设计：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/appfuse_app_architecture.jpg" alt="appfuse app architecture">
</div>
<div class="title">图 1. 典型的 AppFuse 应用程序</div>
</div>
<div class="paragraph">
<p>清单 1 给出了我们在创建 devworks 项目时所使用的命令行交互操作，同时还给出了所生成的结果。这个项目使用了 WebWork 作为自己的 Web 框架（请参考下面 参考资料 一节给出的链接）。</p>
</div>
<div class="listingblock">
<div class="title">清单 1. 使用 AppFuse 创建新项目</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">alotta:~/dev/appfuse mraible$ ant new
Buildfile: build.xml

clean:
     [echo] Cleaning build and distribution directories

init:

new:
     [echo]
     [echo] +-------------------------------------------------------------+
     [echo] |    -- Welcome to the AppFuse New Application Wizard! --     |
     [echo] |                                                             |
     [echo] | To create a new application, please answer the following    |
     [echo] | questions.                                                  |
     [echo] +-------------------------------------------------------------+

    [input] What would you like to name your application [myapp]?
devworks
    [input] What would you like to name your database [mydb]?
devworks
    [input] What package name would you like to use [org.appfuse]?
com.ibm
    [input] What web framework would you like to use [webwork,tapestry,spring,js
f,struts]?
webwork
     [echo] Creating new application named 'devworks'...
     [copy] Copying 359 files to /Users/mraible/Work/devworks
     [copy] Copying 181 files to /Users/mraible/Work/devworks/extras
     [copy] Copying 1 file to /Users/mraible/Work/devworks
     [copy] Copying 1 file to /Users/mraible/Work/devworks

install:
     [echo] Copying WebWork JARs to ../../lib
     [copy] Copying 6 files to /Users/mraible/Work/devworks/lib
     [echo] Adding WebWork entries to ../../lib.properties
     [echo] Adding WebWork classpath entries
     [echo] Removing Struts-specific JARs
   [delete] Deleting directory /Users/mraible/Work/devworks/lib/struts-1.2.9
   [delete] Deleting directory /Users/mraible/Work/devworks/lib/strutstest-2.1.3
     [echo] Deleting struts_form.xdt for XDoclet
   [delete] Deleting directory /Users/mraible/Work/devworks/metadata/templates
     [echo] Deleting Struts merge-files in metadata/web
   [delete] Deleting 7 files from /Users/mraible/Work/devworks/metadata/web
     [echo] Deleting unused Tag Libraries and Utilities
   [delete] Deleting 2 files from /Users/mraible/Work/devworks/src/web/org/appfu
se/webapp
     [echo] Modifying appgen for WebWork
     [copy] Copying 12 files to /Users/mraible/Work/devworks/extras/appgen
     [echo] Replacing source and test files
   [delete] Deleting directory /Users/mraible/Work/devworks/src/web/org/appfuse/
webapp/form
   [delete] Deleting directory /Users/mraible/Work/devworks/src/web/org/appfuse/
webapp/action
     [copy] Copying 13 files to /Users/mraible/Work/devworks/src
   [delete] Deleting directory /Users/mraible/Work/devworks/test/web/org/appfuse
/webapp/form
   [delete] Deleting directory /Users/mraible/Work/devworks/test/web/org/appfuse
/webapp/action
     [copy] Copying 5 files to /Users/mraible/Work/devworks/test
     [echo] Replacing web files (images, scripts, JSPs, etc.)
   [delete] Deleting 1 files from /Users/mraible/Work/devworks/web/scripts
     [copy] Copying 34 files to /Users/mraible/Work/devworks/web
   [delete] Deleting: /Users/mraible/Work/devworks/web/WEB-INF/validator-rules-c
ustom.xml
     [echo] Modifying Eclipse .classpath file
     [echo] Refactoring build.xml
     [echo] ----------------------------------------------
     [echo] NOTE: It's recommended you delete extras/webwork as you shouldn't ne
ed it anymore.
     [echo] ----------------------------------------------
     [echo] Repackaging info written to rename.log
     [echo]
     [echo] +-------------------------------------------------------------+
     [echo] |           -- Application created successfully! --           |
     [echo] |                                                             |
     [echo] | Now you should be able to cd to your application and run:   |
     [echo] | &gt; ant setup test-all                                        |
     [echo] +-------------------------------------------------------------+

BUILD SUCCESSFUL
Total time: 15 seconds</code></pre>
</div>
</div>
<div class="paragraph">
<p>在创建一个新项目之后，我们就得到了一个类似于图 2 所示的目录结构。Eclipse 和 Intellij IDEA 项目文件都是作为这个过程的一部分创建的。</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>为什么使用 WebWork？
Struts 社区最近在热情地拥抱 WebWork，这种结合导致为 Java 平台提供了一个非常优秀的新 Web 框架：Struts 2。当然，Spring MVC 是一个非常优秀的基于请求的框架，但是它不能像 Struts 2 一样支持 JSF。基于内容的框架（例如 JSF 和 Tapestry）也都很好，但是我发现 WebWork 更为直观，更容易使用（更多有关 Structs 2 和 JSF 的内容请参看 参考资料）。</p>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/project_directory_structure.jpg" alt="project directory structure">
</div>
<div class="title">图 2. 项目的目录结构</div>
</div>
<div class="paragraph">
<p>这个目录结构与 Sun 为 Java 2 Platform Enterprise Edition（J2EE）Web 应用程序推荐的目录结构非常类似。在 2.0 版本的 AppFuse 中，这个结构会变化成适合 Apache Maven 项目的标准目录结构（有关这两个目录介绍的内容，请参看 参考资料 中的链接）。AppFuse 还会从 Ant 迁移到 Maven 2 上，从而获得相关下载的能力和对生成 IDE 项目文件的支持。目前基于 Ant 的系统要求提交者维护项目文件，而 Maven 2 可以通过简单地使用项目的 pom.xml 文件生成 IDEA、Eclipse 和 NetBeans 项目文件。（这个文件位于您项目的根目录中，是使用 Maven 构建应用程序所需要的主要组件）。它与利用 Ant 所使用的 <code>build.xml</code> 文件非常类似。）
现在我们对 AppFuse 是什么已经有一点概念了，在本文剩下的部分中，我们将介绍使用 AppFuse 的 7 点理由。即使您选择不使用 AppFuse 来开始自己的项目，也会看到 AppFuse 可以为您提供很多样板代码，这些代码可以在基于 Java 语言的 Web 应用程序中使用。由于它是基于 Apache 许可证的，因此非常欢迎您在自己的应用程序中重用这些代码。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="理由_1测试">理由 1：测试</h2>
<div class="sectionbody">
<div class="paragraph">
<p>测试是在软件开发项目中很少被给予足够信任的一个环节。注意我并不是说在软件开发的一些刊物中没有得到足够的信任！很多文章和案例研究都给出了测试优先的开发方式和足够的测试覆盖面以提高软件的质量。然而，测试通常都被看作是一件只会延长项目开发时间的事情。实际上，如果我们使用测试优先的方法在编写代码之前就开始撰写测试用例，我相信我们可以发现这实际上会加速 开发速度。另外，测试优先也可以使维护和重用更加 容易。如果我们不编写代码来测试自己的代码，那么就需要手工对应用程序进行测试 —— 这通常效率都不高。自动化才是关键。</p>
</div>
<div class="paragraph">
<p>当我们首次开始使用 AppFuse 时，我们可能需要阅读这个项目 Web 站点上提供的快速入门指南和教程（请参看 参考资料 中的链接）。这些教程的编写就是为了您可以首先编写测试用例；它们直到编写接口和/或实现之后才能编译。如果您有些方面与我一样，就会在开始编写代码之前就已经编写好测试用例了；这是真正可以加速编写代码的惟一方式。如果您首先编写了代码的实现，通过某种方式验证它可以工作，那么您可能会对自己说，“哦，看起来不错 —— 谁需要测试呢？我还有更多的代码需要编写！”这种情况不幸的一面是您通常都会做一些事情 来测试自己的代码；您简单地跳过了可以自动化进行测试的地方。</p>
</div>
<div class="paragraph">
<p>AppFuse 的文档展示了如何测试应用程序的所有 层次。它从数据库层开始入手，使用了 DbUnit（请参看 参考资料）在运行测试之前提前使用数据来填充自己的数据库。在数据访问（DAO）层，它使用了 Spring 的 <code>AbstractTransactionalDataSourceSpringContextTests</code> 类（是的，这的确是一个类的名字！）来允许简单地加载 Spring 上下文文件。另外，这个类对每个 testXXX() 方法封装了一个事务，并当测试方法存在时进行回滚。这种特性使得测试 DAO 逻辑变得非常简单，并且不会对数据库中的数据造成影响。</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>HtmlUnit 支持
HtmlUnit 团队在 1.8 发行版中已经完成了相当多的工作来确保包可以与流行的 Ajax 框架（Prototype 和 Scriptaculous）很好地工作。</p>
</div>
</div>
</div>
<div class="paragraph">
<p>在服务层，jMock （请参看 参考资料）用来编写那些可以消除 DAO 依赖的真正 单元测试。这允许进行验证业务逻辑正确的快速测试；我们不用担心底层的持久性逻辑。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="理由_2集成">理由 2：集成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>正如我在本文简介中提到的一样，很多开放源码库都已经预先集成到 AppFuse 中了。它们可以分为以下几类：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>编译、报告和代码生成：Ant、Ant Contrib Tasks、Checkstyle、EMMA、Java2Html、PMD 和 Rename Packages</p>
</li>
<li>
<p>测试框架：DbUnit、Dumbster、jMock、JUnit 和 Canoo WebTest</p>
</li>
<li>
<p>数据库驱动程序：MySQL 和 PostgreSQL</p>
</li>
<li>
<p>持久性框架：Hibernate 和 iBATIS</p>
</li>
<li>
<p>IoC 框架：Spring</p>
</li>
<li>
<p>Web 框架：JSF、Spring MVC、Struts、Tapestry 和 WebWork</p>
</li>
<li>
<p>Web 服务：XFire</p>
</li>
<li>
<p>Web 工具：Clickstream、Display Tag、DWR、JSTL、SiteMesh、Struts Menu 和 URL Rewrite Filter</p>
</li>
<li>
<p>Security：Acegi Security</p>
</li>
<li>
<p>JavaScript 和 CSS：Scriptaculous、Prototype 和 Mike Stenhouse 的 CSS Framework</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>除了这些库之外，AppFuse 还使用 Log4j 来记录日志，使用 Velocity 来构建 e-mail 和菜单模板。Tomcat 可以支持最新的开发，我们可以使用 1.4 或 5 版本的 Java 平台来编译或构建程序。我们应该可以将 AppFuse 部署到任何 J2EE 1.3 兼容的应用服务器上；这已经经过了测试，我们知道它在所有主要版本的 J2EE 服务器和所有主要的 servlet 容器上都可以很好地工作。</p>
</div>
<div class="paragraph">
<p>图 3 给出了上面创建的 devworks 项目的 <code>lib</code> 目录。这个目录中的 <code>lib.properties</code> 文件控制了每个依赖性的版本号，这意味着我们可以简单地通过把这些包的新版本放到这个目录中并执行诸如 <code>ant test-all -Dspring.version=2.0</code> 之类的命令来测试这些包的新版本。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/project_lib_directory.jpg" alt="project lib directory">
</div>
<div class="title">图 3. 项目依赖性</div>
</div>
<div class="paragraph">
<p>预先集成这些开放源码库可以在项目之初极大地提高生产效率。尽管我们可以找到很多文档介绍如何集成这些库，但是定制工作示例并简单地使用它来开发应用程序要更加简单。</p>
</div>
<div class="paragraph">
<p>除了可以简化 Web 应用程序的开发之外，AppFuse 让我们还可以将 Web 服务简单地集成到自己的项目中。尽管 XFire 也在 AppFuse 下载中一起提供了，不过如果我们希望，也可以自己集成 Apache Axis（请参看 参考资料 中有关 Axis 集成的教程）。另外，Spring 框架和 XFire 可以一起将服务层作为 Web 服务非常简单地呈现出来，这就为我们提供了开发面向服务架构的能力。</p>
</div>
<div class="paragraph">
<p>另外，AppFuse 并不会将我们限定到任何特定的 API 上。它只是简单地对可用的最佳开放源码解决方案重新进行打包和预先集成。AppFuse 中的代码可以处理这种集成，并实现了 AppFuse 的基本安全性和可用性特性。只要可能，就会减少代码，以便向 AppFuse 的依赖框架添加一个特性。例如，AppFuse 自带的 Remember Me 和 SSL 切换特性最近就因为类似的特性而从 Acegi Security 中删除了。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="理由_3自动化">理由 3：自动化</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ant 使得简化了从编译到构建再到部署的自动化过程。Ant 是 AppFuse 中的一等公民，这主要是因为我发现在命令行中执行操作比从 IDE 中更加简单。我们可以使用 Ant 实现编译、测试、部署和执行任何代码生成的任务。</p>
</div>
<div class="paragraph">
<p>尽管这种能力对于有些人来说非常重要，但是它并不适用于所有的人。很多 AppFuse 用户目前都使用 Eclipse 或 Intellij IDEA 来构建和测试自己的项目。在这些 IDE 中运行 Ant 的确可以工作，但是这样做的效率通常都不如使用 IDE 内置的 JUnit 支持来运行测试效率高。</p>
</div>
<div class="paragraph">
<p>幸运的是，AppFuse 支持在 IDE 中运行测试，不过管理这种特性对于 AppFuse 开发人员来说就变得非常困难了。最大的痛苦在于 XDoclet 用来生成 Hibernate 映射文件和 Web 框架所使用的一些工件（例如 ActionForms 和 Struts 使用的 <code>struts-config.xml</code>）。IDE 并不知道需要生成的代码，除非我们配置使用 Ant 来编译它们，或者安装了一些可以认识 XDoclet 的插件。</p>
</div>
<div class="paragraph">
<p>这种对知识的缺乏是 AppFuse 2.0 切换到 JDK 5 和 Maven 2 上的主要原因。JDK 5、注释和 Struts 2 将让我们可以摆脱 XDoclet。Maven 2 将使用这些生成的文件和动态类路径来生成 IDE 项目文件，这样对项目的管理就可以进行简化。目前基于 Ant 的编译系统已经为不同的层次生成了一些工件（包括 dao.jar、service.jar 和 webapp.war），因此切换到 Maven 的模型上应该是一个非常自然的调整。</p>
</div>
<div class="paragraph">
<p>除了 Ant 之外（它对于编译、测试、部署和报告具有丰富的支持），对于 <code>CruiseControl</code> 的支持也构建到了 AppFuse 中。<code>CruiseControl</code> 是一个 Continuous Integration 应用程序，让我们可以在源代码仓库中代码发生变化时自动运行所有的测试。<code>extras/cruisecontrol</code> 目录包含了我们为基于 AppFuse 的项目快速、简单地设置 Continuous Integration 时所需要的文件。</p>
</div>
<div class="paragraph">
<p>设置 Continuous Integration 是软件开发周期中我们首先要做的事情之一。它不但激发程序员去编写测试用例，而且还通过 “You broke the build!” 游戏促进了团队之间的合作和融合。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="理由_4安全特性和可扩展性">理由 4：安全特性和可扩展性</h2>
<div class="sectionbody">
<div class="paragraph">
<p>AppFuse 最初是作为我为 Apress 编写的书籍 Pro JSP 中示例应用程序的一部分开发的。这个示例应用程序展示了很多安全特性和用于简化 Struts 开发的特性。这个应用程序中的很多安全特性在 J2EE 的安全框图中都不存在。使用容器管理认证（CMA）的认证方法非常简单，但是 Remember Me、密码提示、SSL 切换、登记和用户管理等功能却都不存在。另外，基于角色的保护方法功能在非 EJB 环境中也是不可能的。</p>
</div>
<div class="paragraph">
<p>最初，AppFuse 使用自己的代码和用于 CMA 的解决方案完全实现了这些特性。我在 2004 年年初开始学习 Spring 时就听说过有关 Acegi Security 的知识。我对 Acegi 所需要的 XML 的行数（175）与 web.xml 中所需要的 CMA 的行数（20）进行了比较，很快就决定丢弃 Acegi 了，因为它太过复杂了。</p>
</div>
<div class="paragraph">
<p>一年半之后 —— 在为另外一本书 Spring Live 中编写了一章有关使用 Acegi Security 的内容之后 —— 我就改变了自己的想法。Acegi 的确（目前仍然）需要很多 XML，但是一旦我们理解了这一点，它实际上是相当简单的。当我们最终作出改变，使用 Acegi Security 的特性来全部取代 AppFuse 的特性之后，我们最终删除了大量的代码。类之上的类都已经没有了，“Acegi handles that now” 中消失的部分现在全部进入了 CVS 的 Attic 中了。</p>
</div>
<div class="paragraph">
<p>Acegi Security 是 J2EE 安全模型中曾经出现过的最好模型。它让我们可以实现很多有用的特性，这些特性在 Servlet API 的安全模型中都不存在：认证、授权、角色保护方法、Remember Me、密码加密、SSL 切换、用户切换和注销。它让我们还可以将用户证书存储到 XML 文件、数据库、LDAP 或单点登录系统（例如 Yale 的 Central Authentication Service (CAS) 或者 SiteMinder）中。</p>
</div>
<div class="paragraph">
<p>AppFuse 对很多与安全性相关的特性的实现从一开始都是非常优秀的。现在 AppFuse 使用了 Acegi Security，这些特性 —— 以及更多特性 —— 都非常容易实现。Acegi 有很多地方都可以进行扩充：这是它使用巨大的 XML 配置文件的原因。正如我们已经通过去年的课程对 Acegi 进行集成一样，我们已经发现对很多 bean 的定义进行定制可以更加紧密地与 AppFuse 建立联系。</p>
</div>
<div class="paragraph">
<p>Spring IoC 容器和 Acegi Security 所提供的简单开发、容易测试的代码和松耦合特性的组合是 AppFuse 是这么好的一种开发平台的主要原因。这些框架都是不可插入的，允许生成干净的可测试代码。AppFuse 集成了很多开放源码项目，依赖注入允许对应用程序层进行简单的集成。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="理由_5使用_appgen_生成代码">理由 5：使用 AppGen 生成代码</h2>
<div class="sectionbody">
<div class="paragraph">
<p>有些人会将代码生成称为代码气味的散播（code smell）。在他们的观点中，如果我们需要生成代码，那么很可能就会做一些错事。我倾向于这种确定自己代码使用的模式和自动化生成代码的能力应该称为代码香味的弥漫（code perfume）。如果我们正在编写类似的 DAO、管理器、操作或控件，并且不想为它们生成代码，那么这就需要根据代码的气味来生成代码。当然，当语言可以为我们提供可以简化任务的特性时，一切都是那么美好；不过代码生成通常都是一个必需 —— 通常其生产率也非常高 —— 的任务。</p>
</div>
<div class="paragraph">
<p>AppFuse 中提供了一个基于 Ant 和 XDoclet 的代码生成工具，名叫 AppGen。默认情况下，常见的 DAO 和管理器都可以允许我们对任何普通老式 Java 对象（POJO）进行 CRUD 操作，但是在 Web 层上这样做有些困难。AppGen 有几个特性可以用来执行以下任务：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>（使用 Middlegen 和 Hibernate 工具）从数据库表中生成 POJO</p>
</li>
<li>
<p>从 POJO 生成 UI</p>
</li>
<li>
<p>为 DAO、管理器、操作/控制器和 UI 生成测试</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在运行 AppGen 时，您会看到提示说 AppGen 要从数据库表或 POJO 中生成代码。如果在命令行中执行 <code>ant install-detailed</code>，AppGen 就会安装 POJO 特定的 DAO、管理器以及它们的测试。运行 <code>ant install</code> 会导致 Web 层的类重用通用的 DAO 和默认存在的管理器。
为了阐述 AppGen 是如何工作的，我们在 devworks MySQL 数据库中创建了如清单 2 所示的表：</p>
</div>
<div class="listingblock">
<div class="title">清单 2. 创建一个名为 cat 的数据库表</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-sql" data-lang="sql">create table cat (
  cat_id int(8) auto_increment,
  color varchar(20) not null,
  name varchar(20) not null,
  created_date datetime not null,
  primary key (cat_id)
) type=InnoDB;</code></pre>
</div>
</div>
<div class="paragraph">
<p>在 <code>extras/appgen</code> 目录中，运行 <code>ant install-detailed</code>。这个命令的输出结果对于本文来说实在太长了，不过我们在清单 3 中给出了第一部分的内容：</p>
</div>
<div class="listingblock">
<div class="title">清单 3. 运行 AppGen 的 <code>install-detailed</code> 目标</div>
<div class="content">
<pre>$ ant install-detailed
Buildfile: build.xml

init:
    [mkdir] Created dir: /Users/mraible/Work/devworks/extras/appgen/build
     [echo]
     [echo] +-------------------------------------------------------+
     [echo] |             -- Welcome to the AppGen! --              |
     [echo] |                                                       |
     [echo] | Use the "install" target to use the generic DAO and   |
     [echo] | Manager, or use "install-detailed" to general a DAO   |
     [echo] | and Manager specifically for your model object.       |
     [echo] +-------------------------------------------------------+

    [input] Would you like to generate code from a table or POJO? (table,pojo)
table
    [input] What is the name of your table (i.e. person)?
cat
    [input] What is the name, if any, of the module for your table (i.e. organization)?

     [echo] Running Middlegen to generate POJO...</pre>
</div>
</div>
<div class="paragraph">
<p>要对 <code>cat</code> 表使用这个新生成的代码，我们需要修改 <code>src/dao/com/ibm/dao/hibernate/applicationContext-hibernate.xml</code>，来为 Hibernate 添加 <code>Cat.hbm.xml</code> 映射文件。清单 3 给出了我们修改后的 <code>sessionFactory</code> bean 的样子：</p>
</div>
<div class="listingblock">
<div class="title">清单 4. 将 Cat.hbm.xml 添加到 <code>sessionFactory</code> bean 中</div>
<div class="content">
<pre>    &lt;bean id="sessionFactory" class="..."&gt;
    &lt;property name="dataSource" ref="dataSource"/&gt;
    &lt;property name="mappingResources"&gt;
        &lt;list&gt;
            &lt;value&gt;com/ibm/model/Role.hbm.xml&lt;/value&gt;
            &lt;value&gt;com/ibm/model/User.hbm.xml&lt;/value&gt;
            &lt;value&gt;com/ibm/model/Cat.hbm.xml&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
    ...
&lt;/bean&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>在运行 <code>ant setup deploy</code> 之后，我们就应该可以在部署的应用程序中对 <code>cat</code> 表执行 CRUD 操作了：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/cat_list.jpg" alt="cat list">
</div>
<div class="title">图 4. Cat 列表</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/cat_detail.jpg" alt="cat detail">
</div>
<div class="title">图 5. Cat 表单</div>
</div>
<div class="paragraph">
<p>我们在上面的屏幕快照中看到的记录都是作为代码生成的一部分创建的，因此现在就有测试数据了。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="理由_6文档">理由 6：文档</h2>
<div class="sectionbody">
<div class="paragraph">
<p>我们可以找到 AppFuse 各个风味的教程，并且它们都以 6 种不同的语言给出了：中文、德语、英语、韩语、葡萄牙语和西班牙语。使用风味（flavor） 一词，我的意思是不同框架的组合，例如 Spring MVC 加上 iBATIS、Spring MVC 加上 Hibernate 或 JSF 加上 Hibernate。使用这 5 种 Web 框架和两种持久框架，可以有好几种组合。有关它们的翻译，AppFuse 为自己的默认特性提供了 8 种翻译。可用语言包括中文、荷兰语、德语、英语、法语、意大利语、葡萄牙语和西班牙语。</p>
</div>
<div class="paragraph">
<p>除了核心教程之外，还添加了很多教程（请参看 参考资料） 来介绍与各种数据库、应用服务器和其他开放源码技术（包括 JasperReports、Lucene、Eclipse、Drools、Axis 和 DWR）的集成。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="理由_7社区">理由 7：社区</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache 软件基金会对于开放源码有一个有趣的看法。它对围绕开放源码项目开发一个开放源码社区最感兴趣。它的成员相信如果社区非常强大，那么产生高质量的代码就是一个自然的过程。下面的内容引自 Apache 主页：</p>
</div>
<div class="paragraph">
<p>“我们认为自己不仅仅是一组共享服务器的项目，而且是一个开发人员和用户的社区。”</p>
</div>
<div class="paragraph">
<p>AppFuse 社区从 2003 年作为 SourceForge 上的一个项目（是 struts.sf.net 的一部分）启动以来，已经获得了极大的增长。通过在 2004 年 3 月转换到 java.net 上之后，它已经成为这里一个非常流行的项目，从 2005 年 1 月到 3 月成为访问量最多的一个项目。目前它仍然是一个非常流行的项目（有关 java.net 项目统计信息的链接，请参看 参考资料），不过在这个站点上它正在让位于 Sun 赞助的很多项目。</p>
</div>
<div class="paragraph">
<p>在 2004 年年末，Nathan Anderson 成为继我之后第一个提交者。此后有很多人都加入了进来，包括 Ben Gill、David Carter、Mika G?ckel、Sanjiv Jivan 和 Thomas Gaudin。很多现有的提交者都已经通过各种方式作出了自己的贡献，他们都帮助 AppFuse 社区成为一个迅速变化并且非常有趣的地方。</p>
</div>
<div class="paragraph">
<p>邮件列表非常友好，我们试图维护这样一条承诺 “没有问题是没有人理会的问题”。我们的邮件列表归档文件中惟一一条 “RTFM” 是从用户那里发出的，而不是从开发者那里发出的。我们绝对信奉 Apache 开放源码社区的哲学。引用我最好的朋友 Bruce Snyder 的一句话，“我们为代码而来，为人们而留下”。目前，大部分开发者都是用户，我们通常都喜欢有一段美妙的时间。另外，大部分文档都是由社区编写的；因此，这个社区的知识是非常渊博的。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="结束语">结束语</h2>
<div class="sectionbody">
<div class="paragraph">
<p>我们应该尝试使用 AppFuse 进行开发，这是因为它允许我们简单地进行测试、集成、自动化，并可以安全地生成 Web 应用程序。其文档非常丰富，社区也非常友好。随着其支撑框架越来越好，AppFuse 也将不断改进。</p>
</div>
<div class="paragraph">
<p>从 AppFuse 2.0 开始，我们计划迁移到 JDK 5（仍然支持部署到 1.4）和 Maven 2 上去。这些工具可以简化使用 AppFuse 的开发、安装和升级。我们计划充分利用 Maven 2 的功能来处理相关依赖性。我们将碰到诸如 <code>appfuse-hibernate-2.0.jar</code> 和 <code>appfuse-jsf-2.0.jar</code> 之类的工件。这些工件都可以在 <code>pom.xml</code> 文件中进行引用，它们负责提取其他相关依赖性。除了在自己的项目中使用 AppFuse 基类之外，我们还可以像普通的框架一样在 JAR 中对这些类简单地进行扩展，这应该会大大简化它的升级过程，并鼓励更多用户将自己希望的改进提交到这个项目中。</p>
</div>
<div class="paragraph">
<p>如果没有其他问题，使用 AppFuse 可以让您始终处于 Java Web 开发的技术前沿上 —— 就像我们一样！</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="相关主题">相关主题</h2>
<div class="sectionbody">
<div class="paragraph">
<p>您可以参阅本文在 developerWorks 全球站点上的 英文原文 。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AppFuse：该项目的主页。</p>
</li>
<li>
<p>AppFuse Demos：查看演示和视频。</p>
</li>
<li>
<p>Struts 2 和 JSF：了解为什么要将这些技术放到一起工作。</p>
</li>
<li>
<p>Sun 的 J2EE 项目目录结构指南：AppFuse 非常接近于这些指南。</p>
</li>
<li>
<p>Maven 的 Standard Directory Layout：AppFuse 2.0 将转换到这个目录结构上。</p>
</li>
<li>
<p>AppFuse 快速入门指南：快速入门并使用 AppFuse。</p>
</li>
<li>
<p>AppFuse 教程：深入学习更多有关使用 AppFuse 的知识。</p>
</li>
<li>
<p>Apache Axis 集成：如何将 Apache Axis 集成到自己的 AppFuse 项目中。</p>
</li>
<li>
<p>AppFuse on java.net：下载不同风味的 AppFuse。</p>
</li>
<li>
<p>WebWork：了解这个易于使用的 Web 框架。</p>
</li>
<li>
<p>DbUnit：查看更多有关 JUnit 扩展的内容。</p>
</li>
<li>
<p>jMock：创建动态仿真对象来简化真正的单元测试。</p>
</li>
<li>
<p>Canoo WebTest：自动化 Web 应用程序的 UI 测试。</p>
</li>
<li>
<p>HtmlUnit：WebTest 的优秀 JavaScript 支持背后的基础。</p>
</li>
<li>
<p>Cargo：自动启动和停止容器。</p>
</li>
<li>
<p>Greenbox：一种代码生成框架。</p>
</li>
<li>
<p>Java.net 项目状态：请查看 2005 年 1 月、2 月 和 3 月 的动态。还可以查看 java.net 上的最佳项目 。</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>原文：http://www-128.ibm.com/developerworks/java/library/j-appfuse/</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div></div>
              <ul id="direction" class="pagination blog-pagination pager">
              
              <li class="next"><a href="../../../blog/2017/07/introducing-spring-cloud-function.html">介绍Spring Cloud Function 项目 →</a></li>
              </ul>
            </div>
            <section id="gitalk-container"></section>
          </article>
          <aside class="span4 mobile-right-pane">
      <div><h2>文章分类</h2>
        <ul class="right-pane-widget--container secondary-nav with-icon">
          <li class="blog-category active">
            <div class="icon blog-icon all-posts"></div>
            <a href="/blog/">全部内容</a>
            <a class="pull-right" href="/feed.xml"><i class="icon-rss"></i></a>
          </li>
          <li class="blog-category">
            <div class="icon blog-icon engineering"></div>
            <a href="/blog/category/article.html">书籍文章</a>
            <a class="pull-right" href="/feed.xml"><i class="icon-rss"></i></a>
          </li>
          <li class="blog-category">
            <div class="icon blog-icon releases"></div>
            <a href="/blog/category/release.html">版本发布</a>
            <a class="pull-right" href="/feed.xml"><i class="icon-rss"></i></a>
          </li>
          <li class="blog-category">
            <div class="icon blog-icon news-and-events"></div>
            <a href="/blog/category/news.html">新闻资讯</a>
            <a class="pull-right" href="/feed.xml"><i class="icon-rss"></i></a>
          </li>
        </ul>
      </div>
      <div><h2>最新文章</h2>
        <ul class="right-pane-widget--container secondary-nav with-icon">
          <li class="blog-category">
            <div class="icon blog-icon news"></div>
            <a href="../../../blog/2018/11/this-week-in-spring-november-9th-2018.html" title="Spring一周回顾（2018年11月9日）">Spring一周回顾（2018...</a>
            <span class="pull-right">2018-11-09</span>
          </li>
          <li class="blog-category">
            <div class="icon blog-icon release"></div>
            <a href="../../../blog/2018/11/spring-credhub-2-0-0-m1-released.html" title="Spring CredHub 2.0.0.M1 发布">Spring CredHub ...</a>
            <span class="pull-right">2018-11-05</span>
          </li>
          <li class="blog-category">
            <div class="icon blog-icon release"></div>
            <a href="../../../blog/2018/11/spring-cloud-task-2-1-0-m1-is-now-available.html" title="Spring Cloud Task 2.1.0.M1 发布">Spring Cloud Ta...</a>
            <span class="pull-right">2018-11-05</span>
          </li>
          <li class="blog-category">
            <div class="icon blog-icon news"></div>
            <a href="../../../blog/2018/11/this-week-in-spring-november-2th-2018.html" title="Spring一周回顾（2018年11月2日，SpringOne Tour 2018北京）">Spring一周回顾（2018...</a>
            <span class="pull-right">2018-11-02</span>
          </li>
          <li class="blog-category">
            <div class="icon blog-icon release"></div>
            <a href="../../../blog/2018/10/reactor-bismuth-sr13-and-californium-sr2-available-now.html" title="Reactor Bismuth-SR13 和 Californium-SR2 发布">Reactor Bismuth...</a>
            <span class="pull-right">2018-10-31</span>
          </li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
        </ul>
      </div>
    </aside>
        </div>
      </div>
    </main>
    <footer class="footer">
      <div class="container-fluid">
        <div class="row-fluid">
          <div class="span12">
            <div class="navbar">
              <div class="container">
                <ul class="nav">
                  <li><a href="../../../team.html">Team</a></li>
                  <li><a href="../../../services.html">Services</a></li>
                  <li><a href="../../../tools.html">Tools</a></li>
                </ul>
              </div>
            </div>
            &copy; <span>2018</span> <a href="http://springdev.io/">SpringDev.IO</a>. All Rights Reserved.
            <a href="../../../terms-of-use.html">Terms of Use</a>,
            <a href="../../../privacy-policy.html">Privacy</a>,
            <a href="../../../trademarks.html">Trademark Guidelines</a> and
            <span id="teconsent"></span>
          </div>
        </div>
      </div>
    </footer>
    <div id="scrim"></div>
  </div>
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script type="text/javascript">
      var gitalk = new Gitalk({
        clientID: 'e0ad4e23b37963590faf',
        clientSecret: '1bbf06b574f0e6623211f8cc029f874db67c7dfe',
        repo: 'springdev-issues',
        owner: 'springdev-io',
        admin: ['rainboyan'],
        id: 'Comments',
        distractionFreeMode: true
      });
      gitalk.render('gitalk-container');
  </script>
  </body>
</html>